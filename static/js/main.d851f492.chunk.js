(this.webpackJsonpgallery=this.webpackJsonpgallery||[]).push([[0],{73:function(e,t,a){e.exports=a(85)},78:function(e,t,a){},85:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(9),c=a.n(r),l=(a(78),a(8)),i=function(e,t){return"USER"===t.type?t.payload:"CLEAR"===t.type?null:e},s=a(11),m=a(23),u=a(115),p=a(118),d=a(65),f=a(133),g=a(42),h=a(131),E=a(120),b=a(121),y=a(32),v=a.n(y),j=Object(u.a)((function(e){return{paper:{marginTop:e.spacing(18),padding:e.spacing(3),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.primary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},link:{textAlign:"center",margin:e.spacing(0,0,1)}}}));function C(){var e=j(),t=Object(n.useContext)(fe),a=(t.state,t.dispatch),r=Object(s.f)(),c=Object(n.useState)(""),i=Object(l.a)(c,2),u=i[0],y=i[1],C=Object(n.useState)(""),O=Object(l.a)(C,2),S=O[0],k=O[1];return o.a.createElement(p.a,{component:"main",maxWidth:"xs"},o.a.createElement(d.a,{elevation:3,className:e.paper},o.a.createElement(f.a,{className:e.avatar},o.a.createElement(v.a,null)),o.a.createElement(g.a,{component:"h1",variant:"h5"},"Sing in"),o.a.createElement("form",{className:e.form},o.a.createElement(h.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,value:u,onChange:function(e){y(e.target.value)}}),o.a.createElement(h.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:S,onChange:function(e){k(e.target.value)}}),o.a.createElement(E.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,onClick:function(){fetch("https://instar-clone.herokuapp.com/signin",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:u,password:S})}).then((function(e){return e.json()})).then((function(e){e.error?alert(JSON.stringify(e.error)):(localStorage.setItem("jwt",e.token),localStorage.setItem("user",JSON.stringify(e.user)),a({type:"USER",payload:e.user}),r.push("/"))})).catch((function(e){console.log(e),alert(e)}))}},"Sign In"),o.a.createElement(b.a,{className:e.link},o.a.createElement(m.b,{to:"/singup",variant:"body2",style:{color:"#3f51b5",textDecoration:"none"}},"You have an account ?")))))}var O=a(13),S=a.n(O),k=a(132),x=Object(u.a)((function(e){return{paper:{marginTop:e.spacing(18),padding:e.spacing(3),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.primary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},link:{textAlign:"center",margin:e.spacing(0,0,1)}}}));function N(){var e=x(),t=Object(s.f)(),a=Object(n.useState)(""),r=Object(l.a)(a,2),c=r[0],i=r[1],u=Object(n.useState)(""),y=Object(l.a)(u,2),j=y[0],C=y[1],N=Object(n.useState)(""),w=Object(l.a)(N,2),B=w[0],I=w[1];return o.a.createElement(p.a,{component:"main",maxWidth:"xs"},o.a.createElement(d.a,{elevation:3,className:e.paper},o.a.createElement(f.a,{className:e.avatar},o.a.createElement(v.a,null)),o.a.createElement(g.a,{component:"h1",variant:"h5"},"Sing up"),o.a.createElement("form",{className:e.form},o.a.createElement(h.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"fullname",label:"Full Name",name:"fullname",autoComplete:"fullname",autoFocus:!0,value:c,onChange:function(e){i(e.target.value)}}),o.a.createElement(h.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",value:j,onChange:function(e){C(e.target.value)}}),o.a.createElement(h.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",value:B,onChange:function(e){return I(e.target.value)}}),o.a.createElement(E.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,onClick:function(){fetch("https://instar-clone.herokuapp.com/signup",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:c,email:j,password:B})}).then((function(e){return e.json()})).then((function(e){e.error?alert(JSON.stringify(e.error)):(S.a.raise({content:o.a.createElement(O.Cinnamon.Crisp,{title:"Post Box",content:e.message,scheme:O.Cinnamon.Crisp.SCHEME_PURPLE,icon:o.a.createElement(k.a,null)})}),t.goBack("/")),console.log(e)}))}},"Sign In"),o.a.createElement(b.a,{className:e.link},o.a.createElement(m.b,{to:"/",variant:"body2",style:{color:"#3f51b5",textDecoration:"none"}},"Don't have an account ?")))))}var w=a(122),B=a(123),I=a(124),P=a(125),_=a(126),T=a(127),W=a(54),z=a.n(W),J=a(46),D=a.n(J),L=a(55),R=a.n(L),A=a(41),U=Object(u.a)((function(e){return{root:{width:600,height:"auto",alignItems:"center",marginBottom:50},media:{height:0,paddingTop:"56.25%"},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},avatar:{backgroundColor:A.a[500]},btn:{display:"flex"},comment:{display:"flex"}}}));function q(e){var t=e.id,a=e.postName,r=e.postById,c=e.photo,i=e.like,s=e.title,m=e.body,u=e.comments,p=e.countLike,d=U(),y=Object(n.useContext)(fe),v=y.state,j=(y.dispatch,Object(n.useState)([])),C=Object(l.a)(j,2),x=C[0],N=C[1],W=Object(n.useState)(""),J=Object(l.a)(W,2),L=J[0],A=J[1];return o.a.createElement(w.a,{className:d.root},o.a.createElement(B.a,{avatar:o.a.createElement(f.a,{"aria-label":"recipe",className:d.avatar},a),action:o.a.createElement(I.a,{"aria-label":"settings"},r===v._id&&o.a.createElement(z.a,{onClick:function(){fetch("https://instar-clone.herokuapp.com/deletepost/"+t,{method:"delete",headers:{authrization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){console.log(e),x.filter((function(t){return t._id!==e._id})),S.a.raise({content:o.a.createElement(O.Cinnamon.Crisp,{title:"Post Box",content:"Delete Post successfully",scheme:O.Cinnamon.Crisp.SCHEME_PURPLE,icon:o.a.createElement(k.a,null)})})}))}})),title:a,subheader:"September 14, 2016"}),o.a.createElement(P.a,{className:d.media,image:c,title:"Paella dish"}),o.a.createElement(_.a,{disableSpacing:!0},p?o.a.createElement(I.a,{color:"secondary","aria-label":"add to favorites",onClick:function(){return function(e){fetch("https://instar-clone.herokuapp.com/unlike",{method:"PUT",headers:{"Content-Type":"application/json",authrization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:e})}).then((function(e){return e.json()})).then((function(e){var t=x.map((function(t){return t._id==e._id?e:t}));N(t)})).catch((function(e){console.log(e)}))}(t)}},o.a.createElement(D.a,null)):o.a.createElement(I.a,{"aria-label":"add to favorites",onClick:function(){return function(e){fetch("https://instar-clone.herokuapp.com/like",{method:"put",headers:{"Content-Type":"application/json",authrization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:e})}).then((function(e){return e.json()})).then((function(t){var a=x.map((function(a){return e==t._id?t:a}));N(a)})).catch((function(e){console.log(e)}))}(t)}},o.a.createElement(D.a,null)),o.a.createElement(I.a,{"aria-label":"share"},o.a.createElement(R.a,null))),o.a.createElement(T.a,null,o.a.createElement(g.a,{variant:"body2",color:"textSecondary",component:"p"},i," likes"),o.a.createElement(g.a,{variant:"body2",color:"textSecondary",component:"p"},s),o.a.createElement(g.a,{variant:"body2",color:"textSecondary",component:"p"},m),u.map((function(e){return o.a.createElement(b.a,{className:d.comment},o.a.createElement(g.a,{variant:"body2",color:"textSecondary",component:"h3",style:{width:"70px"}},e.postedBy.name),o.a.createElement(g.a,{variant:"body2",color:"textSecondary",component:"p",style:{marginLeft:"10px"}},e.commentBody))})),o.a.createElement("form",{className:d.btn,onSubmit:function(e){var a,n;e.preventDefault(),a=L,n=t,fetch("https://instar-clone.herokuapp.com/comment",{method:"put",headers:{"Content-Type":"application/json",authrization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:n,commentBody:a})}).then((function(e){return e.json()})).then((function(e){console.log(e);var t=x.map((function(t){return t._id==e._id?e:t}));N(t)})).catch((function(e){console.log(e)})),A("")}},o.a.createElement(h.a,{margin:"normal",fullWidth:!0,label:"Add a comment",name:"comment",value:L,onChange:function(e){A(e.target.value)}}),o.a.createElement(E.a,{type:"submit",color:"primary"},"Post"))))}var M=a(128),F=a(129),H=a(130),G=a(58),Y=a.n(G),$=a(59),K=a.n($),Q=a(60),V=a.n(Q),X=a(56),Z=a.n(X),ee=a(57),te=a.n(ee),ae=Object(u.a)((function(e){return{root:{background:"#fff",color:"#000"},line:{display:"flex"}}}));function ne(){var e=ae(),t=Object(n.useContext)(fe),a=(t.state,t.dispatch),r=Object(s.f)();return o.a.createElement(M.a,{position:"static",className:e.root},o.a.createElement(F.a,null,o.a.createElement(b.a,{container:!0,alignItems:"center"},o.a.createElement(b.a,{item:!0},o.a.createElement(g.a,null,"Photo Gallery")),o.a.createElement(b.a,{item:!0,sm:!0}),o.a.createElement(b.a,{item:!0},o.a.createElement(I.a,null,o.a.createElement(H.a,{color:"secondary",onClick:function(){r.push("/createpost")}},o.a.createElement(Z.a,{fontSize:"small"}))),o.a.createElement(I.a,null,o.a.createElement(H.a,{color:"secondary"},o.a.createElement(te.a,{fontSize:"small"}))),o.a.createElement(I.a,null,o.a.createElement(H.a,{badgeContent:4,color:"secondary"},o.a.createElement(Y.a,{fontSize:"small"}))),o.a.createElement(I.a,null,o.a.createElement(H.a,{badgeContent:3,color:"primary"},o.a.createElement(K.a,{fontSize:"small"}))),o.a.createElement(I.a,{onClick:function(){localStorage.clear(),a({type:"CLEAR"}),r.push("/singin")}},o.a.createElement(V.a,{fontSize:"small"}))))))}var oe=Object(u.a)((function(e){return{root:{marginTop:e.spacing(6),margin:"auto",padding:e.spacing(3),display:"flex",flexDirection:"column",alignItems:"center"}}}));function re(){var e=Object(n.useContext)(fe),t=e.state,a=(e.dispatch,oe()),r=Object(n.useState)([]),c=Object(l.a)(r,2),i=c[0],s=c[1];return Object(n.useEffect)((function(){fetch("https://instar-clone.herokuapp.com/allpost",{headers:{authrization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){s(e.posts),console.log(e)}))}),[i]),o.a.createElement(b.a,{container:!0},o.a.createElement(b.a,{className:a.root},i.map((function(e){return o.a.createElement(q,{key:e._id,id:e._id,postName:e.postedBy.name,postById:e.postedBy._id,photo:e.photo,countLike:e.likes.includes(t._id),like:e.likes.length,title:e.title,body:e.body,comments:e.comments})}))))}var ce=a(62),le=a.n(ce),ie=a(61),se=a.n(ie),me=a(63),ue=a.n(me),pe=Object(u.a)((function(e){return{paper:{marginTop:e.spacing(18),padding:e.spacing(3),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.primary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},link:{textAlign:"center",margin:e.spacing(0,0,1)},input:{display:"none",marginTop:e.spacing(1)}}}));function de(){var e=pe(),t=Object(s.f)(),a=Object(n.useState)(""),r=Object(l.a)(a,2),c=r[0],i=r[1],m=Object(n.useState)(""),u=Object(l.a)(m,2),y=u[0],v=u[1],j=Object(n.useState)(""),C=Object(l.a)(j,2),k=C[0],x=C[1],N=Object(n.useState)(""),w=Object(l.a)(N,2),B=w[0],I=w[1];Object(n.useEffect)((function(){B&&fetch("https://instar-clone.herokuapp.com/createpost",{method:"post",headers:{"Content-Type":"application/json",authrization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({title:c,body:y,photo:B})}).then((function(e){return e.json()})).then((function(e){e.error?S.a.raise({content:o.a.createElement(O.Cinnamon.Crisp,{title:"Post Box",content:e.error,scheme:O.Cinnamon.Crisp.SCHEME_PURPLE,icon:o.a.createElement(se.a,null)})}):(S.a.raise({content:o.a.createElement(O.Cinnamon.Crisp,{title:"Post Box",content:"create post successfully",scheme:O.Cinnamon.Crisp.SCHEME_PURPLE,icon:o.a.createElement(le.a,null)})}),t.push("/"))})).catch((function(e){console.log(e)}))}),[B]);return o.a.createElement(p.a,{component:"main",maxWidth:"xs"},o.a.createElement(d.a,{elevation:3,className:e.paper},o.a.createElement(f.a,{className:e.avatar},o.a.createElement(ue.a,null)),o.a.createElement(g.a,{component:"h1",variant:"h5"},"Create Post"),o.a.createElement("form",{className:e.form},o.a.createElement(h.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"title",label:"Title",name:"title",autoComplete:"title",autoFocus:!0,value:c,onChange:function(e){return i(e.target.value)}}),o.a.createElement(h.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"body",label:"Body",id:"body",value:y,onChange:function(e){return v(e.target.value)}}),o.a.createElement("input",{type:"file",onChange:function(e){return x(e.target.files[0])}}),o.a.createElement(E.a,{type:"button",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,onClick:function(){return function(){var e=new FormData;e.append("file",k),e.append("upload_preset","instagram"),e.append("cloud_name","bester"),fetch("https://api.cloudinary.com/v1_1/bester/image/upload",{method:"post",body:e}).then((function(e){return e.json()})).then((function(e){console.log(e),I(e.url)})).catch((function(e){console.log(e)}))}()}},"Submit"),o.a.createElement(b.a,{className:e.link},o.a.createElement(n.Link,{to:"/",variant:"body2",style:{color:"#3f51b5",textDecoration:"none"}},"Back to home")))))}var fe=Object(n.createContext)(),ge=function(){var e=Object(n.useContext)(fe),t=(e.state,e.dispatch),a=Object(s.f)();return Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem("user"));e?(t({type:"USER",payload:e}),a.push("/")):a.push("/singin")}),[]),o.a.createElement(s.c,null,o.a.createElement(s.a,{exact:!0,path:"/",component:re}),o.a.createElement(s.a,{path:"/singup",component:N}),o.a.createElement(s.a,{path:"/singin",component:C}),o.a.createElement(s.a,{path:"/createpost",component:de}))};var he=function(){var e=Object(n.useReducer)(i,null),t=Object(l.a)(e,2),a=t[0],r=t[1];return o.a.createElement(fe.Provider,{value:{state:a,dispatch:r}},o.a.createElement(m.a,null,a?o.a.createElement(ne,null):"",o.a.createElement(ge,null),o.a.createElement(S.a,{position:{vertical:O.POS_BOTTOM,horizontal:O.POS_CENTER}})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(he,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[73,1,2]]]);
//# sourceMappingURL=main.d851f492.chunk.js.map